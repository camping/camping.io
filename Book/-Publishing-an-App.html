<!DOCTYPE html>
<html><head><meta charset="utf-8"/><base href="/"><link rel="stylesheet" href="style.css"/><title>Camping, Book: Publishing an App</title><link rel="icon" href="badge.gif"/><meta name="viewport" content="width=695"/></head><body><header id="top"><h1 class="fill" id="">Book: Publishing an App</h1><h1 class="outline" id="Book-Publishing-an-App">Book: Publishing an App</h1></header><div id="wrapper"><ul class="aside" id="nav"><li><a href="index.html">Home</a></li><li><a href="The-Camping-Book">Camping Book</a></li><li><a href="http://camping.rubyforge.org/api.html">Reference</a></li><li><a href="http://log.whywentcamping.com/">Tumblog</a></li></ul><div id="subwrap"><p>Once you've built your Camping app, you'll almost certainly want to get it online some place, so others can get at it! There are tons of ways to do this, some easy, some hard, some free, and some expensive. Some of these techniques also come with limitations.</p>

<h2 class=fill>Using a Spare Computer</h2>
<h2 class=outline id="Using-a-Spare-Computer">Using a Spare Computer</h2>

<p><strong>Cost</strong>: Usually free; <strong>Limitations</strong>: None really; <strong>Extra Requirements</strong>: Need to have a computer you can leave on all the time.</p>

<p>This is probably the easiest way. Just find a computer you can leave on all the time, and use <a href="The-Camping-Server">The Camping Server</a> on Port <code>80</code>, by running something like this in the Command Prompt or Terminal:</p>

<pre><code>camping --port 80 myapp.rb
</code></pre>

<p>Then check to make sure it's working by visiting http://localhost:80/ on that computer. Next, you'll need to find out if your internet provider gives you a Static IP address, or a Dynamic IP. Most home internet providers give you a Dynamic IP, where most business accounts come with a Static IP. If you don't know, you can find out by phoning your internet provider.</p>

<h3 class=fill>If you have a Static IP</h3>
<h3 class=outline id="If-you-have-a-Static-IP">If you have a Static IP</h3>

<p>This is really a great situation to be in. You'll next want to get a domain name of some sort. You can register one on a Domain Name Registrar, but this will generally cost about $12 per year to keep. You can also get a free <em>subdomain</em> name from services like <a href="http://afraid.org/">afraid.org</a>. Regardless how you do it, you'll want to create an <code>A Record</code>, and for it's value, provide your IP address. You can usually find out your IP address by visiting an <a href="http://www.whatsmyip.org/">IP Lookup Website</a>, or by asking your Internet Provider.</p>

<h3 class=fill>If you have a Dynamic IP</h3>
<h3 class=outline id="If-you-have-a-Dynamic-IP">If you have a Dynamic IP</h3>

<p>Your IP Address will change from time to time, so you'll need to use a Dynamic DNS service. Popular <code>DDNS</code> services include <a href="http://afraid.org">Afraid.org</a>, <a href="http://dyndns.com/">DynDNS</a>, and <a href="http://no-ip.com/">No-IP</a>. These will either require you to run a little program on your computer to watch when your IP changes and update the domain name, or have you enter a special username and password in to certain home routers.</p>

<h3 class=fill>Troubleshooting</h3>
<h3 class=outline id="Troubleshooting">Troubleshooting</h3>

<p>If you find others can't access your website through the domain name, and you have a dynamic IP, your Internet Provider might be applying Port Blocking. If you phone them, they might be able to remove the blocks. Otherwise, you'll need to run the camping server on a different port. <code>8080</code> is a common alternative. Of note, you'll need to include :8080 (or whatever) after the domain name and before the slash in your web address for this to work. For example: http://funkytown.afraid.org:8080/ - otherwise, make sure the DDNS updating software is running and working correctly.</p>

<h2 class=fill>Using Dreamhost</h2>
<h2 class=outline id="Using-Dreamhost">Using Dreamhost</h2>

<p><strong>Cost</strong>: About $5 per month; <strong>Limitations</strong>: None really; <strong>Extra Requirements</strong>: SFTP or FTP software, and an SSH client like PuTTY on windows, or the Terminal on Linuxes and Mac OS.</p>

<p>Dreamhost have some really cheap hosting plans, and are quite easy to use. They include support for Rack on their shared hosting plans, and are fairly reliable and fast.</p>

<p>Enable the "Passenger (Ruby/Python apps only):" option in a domain's settings, from the <em>Manage Domains</em> page within the <a href="http://panel.dreamhost.com/">Dreamhost Panel</a>. Ensure the "Shell account - allows SFTP/FTP plus ssh access." option is enabled on your main user, from the <em>Manage Users</em> page. Use your SSH software to login, and if you haven't already, <a href="http://wiki.dreamhost.com/index.php/RubyGems#Installing.2Fupdating_gems_without_installing_gem_2">set up rubygems</a>. Once that's done, it's time to install stuff!</p>

<pre><code>gem install camping-omnibus
</code></pre>

<p>Install any other gems you might need for your app, then use your SFTP or FTP software to upload the file to the folder labeled with your domain's name. Lastly, you'll need to add a few things:</p>

<ul>
<li>A folder called 'tmp', containing a file called 'restart.txt', which you'll need to change whenever you need to make Dreamhost reload your app's source code (while you're trying things out, you can change this filename to 'always_restart.txt' to reload the app with each request).</li>
<li>A file called config.ru, containing something like:</li>
</ul>


<p>```ruby</p>

<blockquote>
<pre><span class="ident">require</span> <span class="punct">'</span><span class="string">rubygems</span><span class="punct">'</span>
<span class="constant">ENV</span><span class="punct">['</span><span class="string">GEM_PATH</span><span class="punct">']</span> <span class="punct">=</span> <span class="constant">File</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span><span class="constant">File</span><span class="punct">.</span><span class="ident">dirname</span><span class="punct">(</span><span class="constant">__FILE__</span><span class="punct">),</span> <span class="punct">'</span><span class="string">..</span><span class="punct">',</span> <span class="punct">'</span><span class="string">.gems</span><span class="punct">')</span> <span class="keyword">if</span> <span class="constant">File</span><span class="punct">.</span><span class="ident">exist?</span><span class="punct">('</span><span class="string">/dh</span><span class="punct">')</span>
<span class="constant">Gem</span><span class="punct">.</span><span class="ident">clear_paths</span>
<span class="ident">require</span> <span class="punct">'</span><span class="string">rack</span><span class="punct">'</span>
<span class="ident">require</span> <span class="punct">'</span><span class="string">blog.rb</span><span class="punct">'</span>

<span class="ident">use</span> <span class="constant">Rack</span><span class="punct">::</span><span class="constant">ShowExceptions</span> <span class="comment"># optional, but helpful if there's any errors</span>

<span class="constant">Blog</span><span class="punct">.</span><span class="ident">create</span> <span class="keyword">if</span> <span class="constant">Blog</span><span class="punct">.</span><span class="ident">respond_to?</span> <span class="symbol">:create</span>
<span class="ident">run</span> <span class="constant">Blog</span></pre>
</blockquote>


<p>```</p>

<p>Make sure it's all uploaded, and your app should be online! Yay!</p>

<h2 class=fill>Using Heroku</h2>
<h2 class=outline id="Using-Heroku">Using Heroku</h2>

<p><strong>Cost</strong>: None for small apps; <strong>Limitations</strong>: Cannot change files in the filesystem, must use database; <strong>Extra Requirements</strong>: Need to install and use git to upload your app to the Heroku servers.</p>

<p>Someone should really add stuff to this section. For now, see <a href="http://radiant-sunset-95.heroku.com/how-to-run-camping-2-apps-on-heroku">How to run Camping 2.0 apps on Heroku</a> or <a href="http://devcenter.heroku.com/articles/rack#frameworks">Heroku's own guide for Rack-based apps</a> (scroll down for Camping).</p>

<h2 class=fill>Using Google App Engine</h2>
<h2 class=outline id="Using-Google-App-Engine">Using Google App Engine</h2>

<p><strong>Cost</strong>: None for small apps; <strong>Limitations</strong>: Cannot change files in the filesystem, must use the google database; <strong>Extra Requirements</strong>: ???.</p>

<p>Someone should also add information to this section. It's possible using jRuby somehow. I imagine <a href="http://code.google.com/p/appengine-jruby/wiki/GettingStarted">this guide</a> would help a lot!</p>

<h2 class=fill>Using a CGI Webhost</h2>
<h2 class=outline id="Using-a-CGI-Webhost">Using a CGI Webhost</h2>

<p>Firstly, make sure your webhost can run ruby apps. Most can, thankfully. If you have shell access, you can check by entering 'which ruby' and seeing if it finds anything. Unfortunately, different webhosts work differently, so we can't provide specific instructions for installing rubygems on your webhost. If all else fails, you can extract the files from the <code>lib</code> folder within each gem, put the files in a folder, and add the big folder to your load path. Once you've done this, you'll just need to make sure your camping app file starts with:</p>

<p>```ruby</p>

<blockquote>
<pre><span class="comment">#!/usr/bin/ruby</span></pre>
</blockquote>


<p>```</p>

<p>And then either the simple postamble, or the complex postamble:</p>

<p>```ruby</p>

<blockquote>
<pre><span class="comment"># Plug it in to CGI</span>
<span class="constant">Rack</span><span class="punct">::</span><span class="constant">Handler</span><span class="punct">::</span><span class="constant">CGI</span><span class="punct">.</span><span class="ident">run</span><span class="punct">(</span><span class="constant">Blog</span><span class="punct">))</span> <span class="keyword">if</span> <span class="constant">__FILE__</span> <span class="punct">==</span> <span class="global">$0</span></pre>
</blockquote>


<p>```</p>

<p>Then upload it to your server, and change the file's permissions to have all the executable bits set. You should now be able to visit the file using your web browser (for example, http://example.com/blog.rb). In fact, you don't even need the .rb. the <code>#!/usr/bin/ruby</code> line lets your server know what kind of file it is. :)</p>

<h2 class=fill>Using a Rack-compatible Webhost</h2>
<h2 class=outline id="Using-a-Rack-compatible-Webhost">Using a Rack-compatible Webhost</h2>

<p>Follow your Webhost's instructions, and in the config.ru file, add a little something like this:</p>

<p><code>ruby
  ...
  require 'blog'
  run Blog
end
</code></p>

<p>To set up Passenger and Rack for really easy deployment under Apache or Nginx see <a href="http://www.modrails.com/">the screencasts on the Passenger site</a>. If you have (e.g.) Apache on your computer, this is also good for local testing too.</p>

<p>You can also use <a href="http://rack.rubyforge.org/doc/Rack/URLMap.html">Rack::URLMap</a> to plug a whole bunch of different apps in to one folder. A camping app here, a rails project there, a sinatra doodad over there in the corner messing up the whole global namespace. The possibilities are severely limited!</p>

<h2 class=fill>And also some luck…</h2>
<h2 class=outline id="And-also-some-luck-">And also some luck…</h2>

<p>We wish you good luck! Publishing your app to a server can be an annoying experience the first time you do it. Often little bugs will appear you never noticed before on your computer, or things just might not work for mysterious reasons. Stick to it, and don't be afraid to ask for help from those more battle hardened.</p>
<a class="edit" href="http://github.com/camping/camping/wiki/Book:-Publishing-an-App/_edit" title="Edit Book: Publishing an App"><button>Edit</button></a></div></div></body></html>